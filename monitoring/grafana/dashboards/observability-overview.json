{
  "id": null,
  "title": "Complete Observability Overview",
  "tags": ["overview", "observability", "all-services"],
  "style": "dark",
  "timezone": "browser",
  "panels": [
    {
      "id": 1,
      "title": "Service Health Status",
      "type": "stat",
      "targets": [
        {
          "expr": "up{job=\"auth-service\"}",
          "refId": "A",
          "legendFormat": "Auth Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "up{job=\"workflow-service\"}",
          "refId": "B",
          "legendFormat": "Workflow Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "up{job=\"task-service\"}",
          "refId": "C",
          "legendFormat": "Task Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "up{job=\"camunda\"}",
          "refId": "D",
          "legendFormat": "Camunda",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        }
      ],
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 0 }
    },
    {
      "id": 2,
      "title": "Request Rate Across All Services",
      "type": "graph",
      "targets": [
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"auth-service\", uri!=\"/actuator/prometheus\"}[1m])",
          "refId": "A",
          "legendFormat": "Auth Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"workflow-service\", uri!=\"/actuator/prometheus\"}[1m])",
          "refId": "B",
          "legendFormat": "Workflow Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"task-service\", uri!=\"/actuator/prometheus\"}[1m])",
          "refId": "C",
          "legendFormat": "Task Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        }
      ],
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 8 }
    },
    {
      "id": 3,
      "title": "Response Time (p95) Across All Services",
      "type": "graph",
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum by (le, job) (rate(http_server_requests_seconds_bucket{job=\"auth-service\", uri!=\"/actuator/prometheus\"}[5m])))",
          "refId": "A",
          "legendFormat": "Auth Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "histogram_quantile(0.95, sum by (le, job) (rate(http_server_requests_seconds_bucket{job=\"workflow-service\", uri!=\"/actuator/prometheus\"}[5m])))",
          "refId": "B",
          "legendFormat": "Workflow Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "histogram_quantile(0.95, sum by (le, job) (rate(http_server_requests_seconds_bucket{job=\"task-service\", uri!=\"/actuator/prometheus\"}[5m])))",
          "refId": "C",
          "legendFormat": "Task Service",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        }
      ],
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 8 }
    },
    {
      "id": 4,
      "title": "Error Rate Across All Services",
      "type": "graph",
      "targets": [
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"auth-service\", status=~\"5..\"}[1m])",
          "refId": "A",
          "legendFormat": "Auth Service 5xx",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"workflow-service\", status=~\"5..\"}[1m])",
          "refId": "B",
          "legendFormat": "Workflow Service 5xx",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "rate(http_server_requests_seconds_count{job=\"task-service\", status=~\"5..\"}[1m])",
          "refId": "C",
          "legendFormat": "Task Service 5xx",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        }
      ],
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 16 }
    },
    {
      "id": 5,
      "title": "JVM Memory Usage Across All Services",
      "type": "graph",
      "targets": [
        {
          "expr": "jvm_memory_used_bytes{job=\"auth-service\", area=\"heap\"}",
          "refId": "A",
          "legendFormat": "Auth Service - {{id}}",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "jvm_memory_used_bytes{job=\"workflow-service\", area=\"heap\"}",
          "refId": "B",
          "legendFormat": "Workflow Service - {{id}}",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        },
        {
          "expr": "jvm_memory_used_bytes{job=\"task-service\", area=\"heap\"}",
          "refId": "C",
          "legendFormat": "Task Service - {{id}}",
          "datasource": {
            "type": "prometheus",
            "uid": "prometheus"
          }
        }
      ],
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 16 }
    },
    {
      "id": 6,
      "title": "Live Log Stream (All Services)",
      "type": "logs",
      "targets": [
        {
          "refId": "A",
          "datasource": {
            "type": "elasticsearch",
            "uid": "elasticsearch"
          },
          "query": "message: (\"auth-service\" OR \"workflow-service\" OR \"task-service\")",
          "bucketAggs": []
        }
      ],
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 24 },
      "options": {
        "showTime": true,
        "showLabels": true,
        "wrapLogMessage": true,
        "enableLogDetails": true
      }
    }
  ],
  "time": { "from": "now-1h", "to": "now" },
  "refresh": "30s"
}
